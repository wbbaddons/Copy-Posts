WBB.Post.CopyClipboard=Class.extend({_boardID:0,init:function(boardID){this._boardID=boardID;$(".jsClipboardEditor").each($.proxy(function(index,container){var $container=$(container);var $types=eval($container.data("types"));if(WCF.inArray("com.woltlab.wbb.post",$types)){$container.on("clipboardAction",$.proxy(this._execute,this));$container.on("clipboardActionResponse",$.proxy(this._evaluateResponse,this));return false}},this))},_execute:function(e,t,n,r){if(t!=="com.woltlab.wbb.post"){return}switch(n){case"com.woltlab.wbb.post.copyToNewThread":WBB.Post.CopyToNewThread.prepare(r,this._boardID);break}},_evaluateResponse:function(e,t,n,r,i){if(n!=="com.woltlab.wbb.post"){return}if(r==="com.woltlab.wbb.post.copyToExistingThread"){var s=new WCF.System.Notification;s.show(function(){window.location=t.returnValues.redirectURL});return}}});WBB.Post.CopyToNewThread={_dialog:null,_objectIDs:[],_submitButton:null,_topic:null,_boardID:0,prepare:function(e,t){this._boardID=t;if(this._dialog===null){this._dialog=$("<div>"+e.template+"</div>").hide().appendTo(document.body);this._dialog.wcfDialog({title:WCF.Language.get("wbb.post.copyToNewThread")})}else{this._dialog.html($.parseHTML(e.template)).wcfDialog("open")}this._objectIDs=e.objectIDs;this._submitButton=this._dialog.find(".formSubmit > button[data-type=submit]").disable().click($.proxy(this._submit,this));this._topic=$("#postCopyNewThreadTopic").keyup($.proxy(this._keyUp,this)).focus()},_keyUp:function(){if($.trim(this._topic.val()).length>0){this._submitButton.enable()}else{this._submitButton.disable()}},_submit:function(){this._submitButton.disable();new WCF.Action.Proxy({autoSend:true,data:{actionName:"copyToNewThread",className:"wbb\\data\\post\\PostCopyAction",objectIDs:this._objectIDs,parameters:{subject:$.trim(this._topic.val()),boardID:this._boardID}},success:$.proxy(this._success,this)})},_success:function(e,t,n){var r=new WCF.System.Notification;r.show(function(){window.location=e.returnValues.redirectURL})}};WBB.Thread.CopyClipboard=Class.extend({init:function(){$(".jsClipboardEditor").each($.proxy(function(index,container){var $container=$(container);var $types=eval($container.data("types"));if(WCF.inArray("com.woltlab.wbb.thread",$types)){$container.on("clipboardActionResponse",$.proxy(this._evaluateResponse,this));return false}},this))},_evaluateResponse:function(e,t,n,r,i){if(n!=="com.woltlab.wbb.thread"){return}if(r==="com.woltlab.wbb.thread.copy"){var s=new WCF.System.Notification;s.show(function(){window.location=t.returnValues.redirectURL});return}}})